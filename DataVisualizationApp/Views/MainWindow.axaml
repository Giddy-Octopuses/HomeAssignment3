<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:DataVisualizationApp.ViewModels"
        xmlns:views="using:DataVisualizationApp.Views"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="DataVisualizationApp.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="DataVisualizationApp">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Window.Styles>
        <!-- Style for chart slot borders before and after clicking on them -->
        <Style Selector="Border.chart-slot">
            <Setter Property="Background" Value="White" />
            <Style Selector="^:selected">
                <Setter Property="Background" Value="LightGray" />
            </Style>
        </Style>
    </Window.Styles>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="1.2*" /> <!-- Title 1.2* -->
            <RowDefinition Height="1.5*" /> <!-- Short Description 1.5* -->
            <RowDefinition Height="1*" /> <!-- ComboBox and Button 1* -->
            <RowDefinition Height="0.8*" /> <!-- Pop-up messages 0.8* -->
            <RowDefinition Height="460" /> <!-- Scrollable Chart Area 11.2* -->
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="MediumPurple" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Padding="0,20,0,20">
            <TextBlock FontSize="18" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center"
                    Text="Student Performance Factors" />
        </Border>

        <TextBlock Grid.Row="1" HorizontalAlignment="Left" TextWrapping="Wrap" Margin="10"
                Text="On this page you can see charts based on analysed data. It is about how different factors influence the performance of students.&#10;The factors are as follows: hours studied, attendance, parental involvement, access to resources, extracurricular activities, sleep hours, previous scores, motivation level, internet access, tutoring sessions, family income, teacher quality, school type, peer influence, physical activity, learning disabilities, parental education level, distance from home and gender." />

        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" /> 
                <ColumnDefinition Width="1*" /> 
                <ColumnDefinition Width="1*" /> 
            </Grid.ColumnDefinitions>

            <ComboBox Grid.Column="0" ItemsSource="{Binding Queries}" SelectedItem="{Binding SelectedQuery}"
             MaxDropDownHeight="100" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="10"
             PlaceholderText="Choose from the queries..." />

            <Button Grid.Column="1" Content="Add chart" Command="{Binding AddChart}" Background="MediumSeaGreen" HorizontalAlignment="Stretch" VerticalAlignment="Center" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="10" />
            <Button Grid.Column="2" Content="Delete chart" Command="{Binding DeleteChart}" Background="IndianRed" HorizontalAlignment="Stretch" VerticalAlignment="Center" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="10"
                    IsVisible="{Binding DeleteButtonVisible}" />
        </Grid>

        <Grid Grid.Row="3">
            <Popup Name="Popup" IsLightDismissEnabled="True" IsOpen="{Binding PopupOpen}">    
                <Border BorderThickness="0.75" BorderBrush="Black" Padding="6,3" Background="White">
                    <TextBlock Text="{Binding Message}" Foreground="{Binding Colour}"/>
                </Border>
            </Popup>
        </Grid>

        <!-- Scrollable Chart Area -->
        <Grid Grid.Row="4" Margin="10">
            <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="230" /> <!-- First & Second Chart -->
                        <RowDefinition Height="230" /> <!-- Third & Fourth Chart -->
                        <RowDefinition Height="230" /> <!-- Fifth & Sixth Chart -->
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="3*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="3*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <!-- First chart placeholder -->
                    <Border Classes="chart-slot" Grid.Column="1" Grid.Row="0" PointerPressed="OnChartSlotPointerPressed"
                            HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <ContentControl Content="{Binding ChartSlots[0]}">
                            <ContentControl.DataTemplates>
                                <DataTemplate DataType="{x:Type vm:PieChartViewModel}">
                                    <views:PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr2PieChartViewModel}">
                                    <views:Nr2PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr3PieChartViewModel}">
                                    <views:Nr3PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr4BarChartViewModel}">
                                    <views:Nr4BarChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr5PieChartViewModel}">
                                    <views:Nr5PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr6PieChartViewModel}">
                                    <views:Nr6PieChartView />
                                </DataTemplate>
                            </ContentControl.DataTemplates>
                        </ContentControl>
                    </Border>

                    <!-- Second chart placeholder -->
                    <Border Classes="chart-slot" Grid.Column="3" Grid.Row="0" PointerPressed="OnChartSlotPointerPressed"
                            HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <ContentControl Content="{Binding ChartSlots[1]}">
                            <ContentControl.DataTemplates>
                                <DataTemplate DataType="{x:Type vm:PieChartViewModel}">
                                    <views:PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr2PieChartViewModel}">
                                    <views:Nr2PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr3PieChartViewModel}">
                                    <views:Nr3PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr4BarChartViewModel}">
                                    <views:Nr4BarChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr5PieChartViewModel}">
                                    <views:Nr5PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr6PieChartViewModel}">
                                    <views:Nr6PieChartView />
                                </DataTemplate>
                            </ContentControl.DataTemplates>
                        </ContentControl>
                    </Border>

                    <!-- Third chart placeholder -->
                    <Border Classes="chart-slot" Grid.Column="1" Grid.Row="1" PointerPressed="OnChartSlotPointerPressed"
                            HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <ContentControl Content="{Binding ChartSlots[2]}">
                            <ContentControl.DataTemplates>
                                <DataTemplate DataType="{x:Type vm:PieChartViewModel}">
                                    <views:PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr2PieChartViewModel}">
                                    <views:Nr2PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr3PieChartViewModel}">
                                    <views:Nr3PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr4BarChartViewModel}">
                                    <views:Nr4BarChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr5PieChartViewModel}">
                                    <views:Nr5PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr6PieChartViewModel}">
                                    <views:Nr6PieChartView />
                                </DataTemplate>
                            </ContentControl.DataTemplates>
                        </ContentControl>
                    </Border>

                    <!-- Fourth chart placeholder -->
                    <Border Classes="chart-slot" Grid.Column="3" Grid.Row="1" PointerPressed="OnChartSlotPointerPressed"
                            HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <ContentControl Content="{Binding ChartSlots[3]}">
                            <ContentControl.DataTemplates>
                                <DataTemplate DataType="{x:Type vm:PieChartViewModel}">
                                    <views:PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr2PieChartViewModel}">
                                    <views:Nr2PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr3PieChartViewModel}">
                                    <views:Nr3PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr4BarChartViewModel}">
                                    <views:Nr4BarChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr5PieChartViewModel}">
                                    <views:Nr5PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr6PieChartViewModel}">
                                    <views:Nr6PieChartView />
                                </DataTemplate>
                            </ContentControl.DataTemplates>
                        </ContentControl>
                    </Border>

                    <!-- Fifth chart placeholder -->
                    <Border Classes="chart-slot" Grid.Column="1" Grid.Row="2" PointerPressed="OnChartSlotPointerPressed"
                            HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <ContentControl Content="{Binding ChartSlots[4]}">
                            <ContentControl.DataTemplates>
                                <DataTemplate DataType="{x:Type vm:PieChartViewModel}">
                                    <views:PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr2PieChartViewModel}">
                                    <views:Nr2PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr3PieChartViewModel}">
                                    <views:Nr3PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr4BarChartViewModel}">
                                    <views:Nr4BarChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr5PieChartViewModel}">
                                    <views:Nr5PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr6PieChartViewModel}">
                                    <views:Nr6PieChartView />
                                </DataTemplate>
                            </ContentControl.DataTemplates>
                        </ContentControl>
                    </Border>

                    <!-- Sixth chart placeholder -->
                    <Border Classes="chart-slot" Grid.Column="3" Grid.Row="2" PointerPressed="OnChartSlotPointerPressed"
                            HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                        <ContentControl Content="{Binding ChartSlots[5]}">
                            <ContentControl.DataTemplates>
                                <DataTemplate DataType="{x:Type vm:PieChartViewModel}">
                                    <views:PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr2PieChartViewModel}">
                                    <views:Nr2PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr3PieChartViewModel}">
                                    <views:Nr3PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr4BarChartViewModel}">
                                    <views:Nr4BarChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr5PieChartViewModel}">
                                    <views:Nr5PieChartView />
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type vm:Nr6PieChartViewModel}">
                                    <views:Nr6PieChartView />
                                </DataTemplate>
                            </ContentControl.DataTemplates>
                        </ContentControl>
                    </Border>
                </Grid>
            </ScrollViewer>
        </Grid>

    </Grid>

</Window>
